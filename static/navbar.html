<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">soir√©e</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li><a href="friendspage.html"><span class="glyphicon glyphicon-heart"></span> Friends </a></li>
        <li><a href="explore.html"><span class="glyphicon glyphicon-tree-deciduous"></span> Explore</a></li>
        <form class="navbar-form navbar-left" role="search">
          <div class="form-group input-group">
            <input type="text" class="form-control" placeholder="Find an Author" id="author-search"></input>
            <span class="input-group-btn">
              <button class="btn btn-default" type="button" id="author-search-btn">
                <span class="glyphicon glyphicon-search"></span>
              </button>
            </span>
          </div>
        </form>
      </ul>

      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
             <strong><p id="nav-display-name" style="margin:0">My Name</p></strong>
           </a>
          <ul class="dropdown-menu">
            <li><a href="profilepage.html"> My Profile </a></li>
            <li><a href="#">Settings</a></li>
            <li role="separator" class="divider"></li>
            <li><a id="logout" href="#">Logout</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- i hate this too but scripts don't seem to work for the navbur unless they're here -->
<script type="text/javascript">
  
  function sendAJAX2(headers, method, url, message, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open(method, url);
    xhr.onreadystatechange = function(){
      if (xhr.readyState==4) {
        try {
          if (xhr.status==200) {
            if(callback) {
              // console.log(xhr.responseText);
              callback(JSON.parse(xhr.responseText));
            }
          }
        }
        catch(e) {
          alert('Error: ' + e.name);
        }
      }
    }
    console.log(headers.length);
    for (var i=0; i<headers.length; ++i) {
      xhr.setRequestHeader(headers[i][0], headers[i][1]);
      //    console.log(headers[i][0] + headers[i][1]);
    }
    xhr.send(JSON.stringify(message));
  }
  
  // onclick method for logout button
  $("#logout").click(function(e) {
    e.preventDefault();
    document.cookie = "cookie_cmput404_author_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "cookie_cmput404_session_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
    document.cookie = "cookie_cmput404_github_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
                     document.cookie = "";
                     localStorage.clear();
    window.location.href = "login.html";
  });

  // onclick method for searching for author by id
  $("#author-search-btn").click(function(e) {
    e.preventDefault();
    localStorage.setItem("fetch-author-id",document. getElementById("author-search").value );
    document.cookie = "request_author_id="+document.getElementById("author-search").value;
    window.location.href = "authorpage.html"
    var linkauthor = "/author/" + document. getElementById("author-search").value;
    var headers = [["Foreign-Host", "false"]];
    sendAJAX2(headers, "GET", linkauthor, "", function(response) {
              
              });
  });

  // display name in navbar
  $(document).ready(function() {
    document.getElementById("nav-display-name").textContent = localStorage.getItem("display_name");
  })
</script>
